<!DOCTYPE html>
<html>
<head>
<link rel="shortcut icon" href="corp/favicon.ico" type="image/x-icon" />
<link rel="icon" href="corp/favicon.ico" type="image/x-icon" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
<meta http-equiv="Content-Type"	content="text/html;	charset=utf-8"/>
<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=0, target-densitydpi=device-dpi"/>
<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="expires" content="0" />
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" />
<meta name="mobile-web-app-capable" content="yes"/>
<meta name="apple-mobile-web-app-capable" content="yes"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black"/>
<!--${WGTS_HEAD}-->
<link rel="stylesheet" type="text/css" href="css/bxPageTransition.css" />
<link rel="stylesheet" type="text/css" href="index_style.css">
<!--${PLUGIN_HEAD}-->
<!-- react lib load -->
<script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
<script crossorigin src="https://unpkg.com/react-webcam@latest/dist/react-webcam.min.js"></script>
<script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<!-- Fixed: Core Class For Exe -->
<script type="text/javascript" src="js/blux-apx-1.1.js"></script>
<script type="text/javascript" src="js/aspen-apx-1.1.js"></script>
<script type="text/javascript" src="js/aspen-runscript-1.0.js"></script>
<!-- Corp Domain -->
<script type="text/javascript" src="corp/lib.js"></script>
<script type="text/javascript" src="corp/db.js"></script>
<script type="text/javascript" src="corp/dbWidgetMap.js"></script>
<!-- Wtgs Module -->
<!--${WGTS_LIBS}-->
<script type="text/javascript" src="wgts/wgts.js"></script>
<!-- File Data -->
<script	type="text/javascript" src="data.js"></script>
<script type="text/javascript" src="asset/app_interface.js"></script>
<script type="text/javascript" src="asset/kumon.common.js"></script>
<script type="text/javascript" src="asset/common_lib_v0.1.8 (2).js"></script>
<style>
</style>
<title>Aspen|published file</title>
</head>
<body style="padding:0;font-family:Arial,sans-serif;margin:0;" onload="apxLoad({pgIdx:'/*${PAGE_INDEX}*/'});">
<!--${WGTS_HTML}-->
<div id="root"></div>
<p id="test" style="position: relative; text-align:center; z-index:10; size: 30;"></p>
<script>
  function getElementByXpath(path) {  return document.evaluate(path, document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;}
</script>
<script type="text/babel">

  class WebcamCapture extends React.Component {
    setRef = (webcam) => {
      this.webcam = webcam;
    }

    stop = () => {
      let stream = this.webcam.video.srcObject;
      const tracks = stream.getTracks();
      
      tracks.forEach(track => track.stop());
      this.webcam.video.srcObject = null;
    };
  }

  const camref = new WebcamCapture();

  function loadWebcam()
  {
      document.getElementById("test").innerHTML =  "<span style='color: black;text-align:center; size: 30;'>" +  "call loadWebcam ++ 1" + "</span>"; 

      ReactDOM.render(
        <Webcam
            audio={false}
            ref={camref.setRef}
          />,
          getElementByXpath("/html/body/div[3]/div/div/div[2]/div[2]/div[2]/div/div/div[3]") 
      );

      document.getElementById("test").innerHTML =  "<span style='color: black;text-align:center; size: 30;'>" +  "call loadWebcam ++ 2" + "</span>"; 
  }

  function CallFunction()
  {
    document.getElementById("test").innerHTML =  "<span style='color: black;text-align:center; size: 30;'>" +  "CallFunction++" + "</span>"; 
    loadWebcam();
  }

  function WebcamStop()
  {
    try
    {
      camref.stop();
      document.getElementById("test").innerHTML =  "<span style='color: black;text-align:center; size: 30;'>" +  "cam stop!!" + "</span>"; 
    }catch(error)
    {
      console.error('예외가 발생했습니다:', error.message);
    }
  }

  document.getElementById("test").innerHTML =  "<span style='color: black;text-align:center; size: 30;'>" +  "babel script init complete" + "</span>"; 
  console.log("load complete");
</script>
</body>
</html>
